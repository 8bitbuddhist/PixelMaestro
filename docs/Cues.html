

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cues &mdash; PixelMaestro 2.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/logo.png"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/collapsible-lists/css/tree_view.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Shows" href="Shows.html" />
    <link rel="prev" title="Canvases" href="Canvases.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PixelMaestro
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Home.html">Home</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Home.html#what-is-pixelmaestro">What is PixelMaestro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="Home.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="Home.html#faq">FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Home.html#how-do-i-change-a-pixel-s-color">How do I change a Pixel’s color?</a></li>
<li class="toctree-l3"><a class="reference internal" href="Home.html#how-do-i-connect-my-leds-to-pixelmaestro">How do I connect my LEDs to PixelMaestro?</a></li>
<li class="toctree-l3"><a class="reference internal" href="Home.html#why-am-i-getting-poor-performance-running-out-of-memory">Why am I getting poor performance / running out of memory?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Tutorial.html#core-concepts">Core Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Tutorial.html#what-s-a-section">What’s a Section?</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tutorial.html#what-s-a-maestro">What’s a Maestro?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Tutorial.html#using-pixelmaestro">Using PixelMaestro</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Tutorial.html#sample-sketch">Sample Sketch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Components.html">Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Components.html#primary-components">Primary Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="Components.html#secondary-components">Secondary Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Maestros.html">Maestros</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#creating-a-maestro">Creating a Maestro</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#updating-the-maestro">Updating the Maestro</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#changing-the-refresh-interval">Changing the Refresh Interval</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#interacting-with-sections">Interacting with Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#setting-a-global-brightness-level">Setting a Global Brightness Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#creating-a-show">Creating a Show</a></li>
<li class="toctree-l2"><a class="reference internal" href="Maestros.html#synchronizing-components">Synchronizing Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Sections.html">Sections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#creating-a-section">Creating a Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#updating-a-section">Updating a Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#interacting-with-the-pixel-grid">Interacting With the Pixel Grid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Sections.html#setting-a-pixel-s-color">Setting a Pixel’s Color</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sections.html#retrieving-a-pixel-s-color">Retrieving a Pixel’s Color</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#animating-a-section">Animating a Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#displaying-custom-shapes-and-patterns">Displaying Custom Shapes and Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#setting-a-brightness-level">Setting a Brightness Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#using-layers">Using Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#scrolling">Scrolling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Sections.html#offsetting">Offsetting</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sections.html#wrapping">Wrapping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Sections.html#mirroring">Mirroring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Points.html">Points</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Points.html#creating-a-point">Creating a Point</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Points.html#coordinates-versus-dimensions">Coordinates Versus Dimensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Points.html#other-methods">Other Methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Pixels.html">Pixels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Pixels.html#creating-pixels">Creating Pixels</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pixels.html#how-pixels-work">How Pixels Work</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pixels.html#performance-options">Performance Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Pixels.html#disabling-fading">Disabling Fading</a></li>
<li class="toctree-l3"><a class="reference internal" href="Pixels.html#enabling-accurate-fading">Enabling Accurate Fading</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Colors.html">Colors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Colors.html#creating-colors">Creating Colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colors.html#mixing-colors">Mixing Colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colors.html#sample-colors">Sample Colors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Palettes.html">Palettes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Palettes.html#creating-a-palette">Creating a Palette</a></li>
<li class="toctree-l2"><a class="reference internal" href="Palettes.html#using-a-palette">Using a Palette</a></li>
<li class="toctree-l2"><a class="reference internal" href="Palettes.html#changing-colors">Changing Colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Palettes.html#retrieving-colors">Retrieving Colors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Animations.html">Animations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#animation-types">Animation Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#creating-an-animation">Creating an Animation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Animations.html#animation-cycles">Animation Cycles</a></li>
<li class="toctree-l3"><a class="reference internal" href="Animations.html#setting-the-color-palette">Setting the Color Palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="Animations.html#setting-additional-options">Setting Additional Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#setting-the-orientation">Setting the Orientation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#changing-the-animation-timing">Changing the Animation Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#toggling-fading">Toggling Fading</a></li>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#changing-the-center">Changing the Center</a></li>
<li class="toctree-l2"><a class="reference internal" href="Animations.html#how-animations-work">How Animations Work</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Canvases.html">Canvases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Canvases.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Canvases.html#creating-a-canvas">Creating a Canvas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#setting-the-palette">Setting the Palette</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Canvases.html#animating-a-canvas">Animating a Canvas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#frames">Frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#switching-frames">Switching Frames</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Canvases.html#drawing-shapes">Drawing Shapes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#selecting-a-color">Selecting a Color</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#lines">Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#points">Points</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#rectangles">Rectangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#text">Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#triangles">Triangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="Canvases.html#clearing-the-canvas">Clearing the Canvas</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initializing-the-cuecontroller">Initializing the CueController</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-the-buffer-size">Setting the Buffer Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-cuehandlers">Enabling CueHandlers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-cues">Creating Cues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-cues">Running Cues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blocking-cues">Blocking Cues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Shows.html">Shows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Shows.html#creating-a-show">Creating a Show</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shows.html#adding-events">Adding Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shows.html#timing-modes">Timing Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shows.html#looping">Looping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Timers.html">Timers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Timers.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Timers.html#creating-a-timer">Creating a Timer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Timers.html#changing-the-interval">Changing the Interval</a></li>
<li class="toctree-l2"><a class="reference internal" href="Timers.html#starting-and-stopping-a-timer">Starting and Stopping a Timer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/root.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/root.html#class-hierarchy">Class Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/root.html#file-hierarchy">File Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/root.html#full-api">Full API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/root.html#namespaces">Namespaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/namespace_PixelMaestro.html">Namespace PixelMaestro</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/root.html#classes-and-structs">Classes and Structs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/structPixelMaestro_1_1Colors_1_1RGB.html">Struct Colors::RGB</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/structPixelMaestro_1_1CueController_1_1BlockedCue.html">Struct CueController::BlockedCue</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/structPixelMaestro_1_1Section_1_1Layer.html">Struct Section::Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/structPixelMaestro_1_1Section_1_1Mirror.html">Struct Section::Mirror</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/structPixelMaestro_1_1Section_1_1Scroll.html">Struct Section::Scroll</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Animation.html">Class Animation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1AnimationCueHandler.html">Class AnimationCueHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1AnimationTimer.html">Class AnimationTimer</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1BlinkAnimation.html">Class BlinkAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Canvas.html">Class Canvas</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1CanvasCueHandler.html">Class CanvasCueHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1ColorPresets.html">Class ColorPresets</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Colors.html">Class Colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1CueController.html">Class CueController</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1CueHandler.html">Class CueHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1CycleAnimation.html">Class CycleAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Event.html">Class Event</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1FireAnimation.html">Class FireAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1FloatByteConvert.html">Class FloatByteConvert</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Font.html">Class Font</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Font5x8.html">Class Font5x8</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1IntByteConvert.html">Class IntByteConvert</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1LightningAnimation.html">Class LightningAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Maestro.html">Class Maestro</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1MaestroCueHandler.html">Class MaestroCueHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1MandelbrotAnimation.html">Class MandelbrotAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Palette.html">Class Palette</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Pixel.html">Class Pixel</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1PlasmaAnimation.html">Class PlasmaAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Point.html">Class Point</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1RadialAnimation.html">Class RadialAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1RandomAnimation.html">Class RandomAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Section.html">Class Section</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1SectionCueHandler.html">Class SectionCueHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Show.html">Class Show</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1ShowCueHandler.html">Class ShowCueHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1SolidAnimation.html">Class SolidAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1SparkleAnimation.html">Class SparkleAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Timer.html">Class Timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1Utility.html">Class Utility</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1VUAnimation.html">Class VUAnimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/classPixelMaestro_1_1WaveAnimation.html">Class WaveAnimation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/root.html#enums">Enums</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/enum_animationtype_8h_1af3853e8c7ec34f748f90c869cfeae993.html">Enum AnimationType</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/root.html#unions">Unions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/unionPixelMaestro_1_1FloatByteConvert_1_1Converter.html">Union FloatByteConvert::Converter</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PixelMaestro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Cues</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Cues.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cues">
<h1>Cues<a class="headerlink" href="#cues" title="Permalink to this headline">¶</a></h1>
<p>Cues are serialized PixelMaestro commands. Using Cues, you can control a device running PixelMaestro remotely, save your configurations to a file, or <a class="reference internal" href="Shows.html"><span class="doc">schedule actions</span></a> to run at a later time.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Avoid using both Cues and standard commands on the same device, as it could cause undefined behavior!</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>There are several components involved in managing Cues:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CueHandlers</span></code> translate PixelMaestro commands into Cues, and vice versa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CueControllers</span></code> transport Cues to and from <code class="docutils literal notranslate"><span class="pre">CueHandlers</span></code>. All Cues pass through the CueController. CueControllers are managed by <a class="reference internal" href="Maestros.html"><span class="doc">Maestros</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Shows</span></code> schedule and store Cues for later execution. You can learn more in the <a class="reference internal" href="Shows.html"><span class="doc">Show documentation</span></a>.</p></li>
</ul>
</div>
<div class="section" id="initializing-the-cuecontroller">
<h2>Initializing the CueController<a class="headerlink" href="#initializing-the-cuecontroller" title="Permalink to this headline">¶</a></h2>
<p>The first step is to initialize the CueController by calling <code class="docutils literal notranslate"><span class="pre">Maestro::set_cue_controller()</span></code>. Calling <a class="reference internal" href="Shows.html"><span class="doc">Maestro::set_show()</span></a> also starts the CueController.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;core/maestro.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cue/cuecontroller.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="n">CueController</span><span class="o">&amp;</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">maestro</span><span class="p">.</span><span class="n">set_cue_controller</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="setting-the-buffer-size">
<h3>Setting the Buffer Size<a class="headerlink" href="#setting-the-buffer-size" title="Permalink to this headline">¶</a></h3>
<p>When a Cue is being created or processed, it is temporarily held in a buffer. This buffer must be large enough to hold the entire Cue or else the CueController will drop the Cue. While most Cues are relatively small (20-30 bytes), some Cues can be several kilobytes. The default buffer size is 256 bytes.</p>
<p>You can specify a custom buffer size when calling <code class="docutils literal notranslate"><span class="pre">maestro.set_cue_controller(uint32_t</span> <span class="pre">size)</span></code>. This way, you can allocate a larger or smaller buffer depending on the amount of memory available on your device.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">70000</span><span class="p">;</span> <span class="c1">// 70 KB</span>
<span class="n">CueController</span><span class="o">&amp;</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">maestro</span><span class="p">.</span><span class="n">set_cue_controller</span><span class="p">(</span><span class="n">buffer_size</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="enabling-cuehandlers">
<h3>Enabling CueHandlers<a class="headerlink" href="#enabling-cuehandlers" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">CueHandlers</span></code> are responsible for mapping Cues to and from PixelMaestro commands. Each of the core PixelMaestro classes has an associated <code class="docutils literal notranslate"><span class="pre">CueHandler</span></code> that translates the class’ methods to and from Cues. For example, <code class="docutils literal notranslate"><span class="pre">SectionCueHandler</span></code> has <code class="docutils literal notranslate"><span class="pre">set_animation</span></code>, <code class="docutils literal notranslate"><span class="pre">set_canvas</span></code>, <code class="docutils literal notranslate"><span class="pre">set_dimensions</span></code>, and other methods that directly correspond to the methods in the <code class="docutils literal notranslate"><span class="pre">Section</span></code> class.</p>
<p>To use a CueHandler, you first need to initialize it using <code class="docutils literal notranslate"><span class="pre">CueController::enable_&lt;component</span> <span class="pre">name&gt;_cue_handler();</span></code>. This initializes the CueHandler and registers it with the CueController so that the CueController can pass the appropriate Cues to it. For example, enabling a <code class="docutils literal notranslate"><span class="pre">SectionCueHandler</span></code> notifies the CueController to pass any Section-related Cues that it receives to the handler. If the CueController receives a Cue but can’t match it to an appropriate CueHandler, it drops the Cue.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Creates a new SectionCueHandler</span>
<span class="n">SectionCueHandler</span><span class="o">&amp;</span> <span class="n">handler</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SectionCueHandler</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">enable_section_cue_handler</span><span class="p">());</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To reduce program size and memory, only enable the CueHandlers that you need.</p>
</div>
</div>
</div>
<div class="section" id="creating-cues">
<h2>Creating Cues<a class="headerlink" href="#creating-cues" title="Permalink to this headline">¶</a></h2>
<p>Cues are created by calling a method on an enabled CueHandler. CueHandler methods are generally identical to the methods present in their corresponding PixelMaestro class, but Section-related CueHandler methods require two new parameters: <code class="docutils literal notranslate"><span class="pre">section</span></code> and <code class="docutils literal notranslate"><span class="pre">layer</span></code>. <code class="docutils literal notranslate"><span class="pre">section</span></code> is the index of the Section that you want to modify (according to the Maestro’s section array), and <code class="docutils literal notranslate"><span class="pre">layer</span></code> is the index of the Layer you want to modify relative to the Section itself. For instance, a Layer index of <code class="docutils literal notranslate"><span class="pre">1</span></code> modifies the Section’s direct Layer, and an index of <code class="docutils literal notranslate"><span class="pre">2</span></code> modifies that Layer’s Layer. Leaving the Layer index at 0 modifies the Section itself.</p>
<p>For example, let’s use Cues to add a Layer to a Section and an Animation to the Layer. We’ll start by enabling the required CueHandlers. Note that enabling a CueHandler returns a pointer to the CueHandler instance. We’ll use this to call the CueHandler’s methods. Each call generates a new Cue and stores it in the CueController’s buffer. We then tell the CueController to run the Cue stored in the buffer before moving to the next Cue.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can get the currently buffered Cue using <code class="docutils literal notranslate"><span class="pre">CueController::get_cue()</span></code>.</p>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;cue/sectioncuehandler.h&quot;</span><span class="cp"></span>

<span class="p">...</span>
<span class="c1">// The index of the Section (in `Maestro::sections_`).</span>
<span class="kt">int</span> <span class="n">section_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// How far down the Layer is.</span>
<span class="c1">// For example, an index of 1 affects the base Section&#39;s Layer, while an index of 2 affects the Layer&#39;s Layer.</span>
<span class="kt">int</span> <span class="n">layer_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Enable CueHandlers</span>
<span class="n">SectionCueHandler</span><span class="o">&amp;</span> <span class="n">section_handler</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SectionCueHandler</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">enable_section_cue_handler</span><span class="p">());</span>
<span class="n">AnimationCueHandler</span><span class="o">&amp;</span> <span class="n">animation_handler</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">AnimationCueHandler</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">enable_animation_cue_handler</span><span class="p">());</span>

<span class="c1">// Set the new Layer</span>
<span class="n">section_handler</span><span class="p">.</span><span class="n">set_layer</span><span class="p">(</span><span class="n">section_index</span><span class="p">,</span> <span class="n">layer_index</span><span class="p">,</span> <span class="n">Colors</span><span class="o">::</span><span class="n">MixMode</span><span class="o">::</span><span class="n">Overlay</span><span class="p">);</span>
<span class="n">controller</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>

<span class="c1">// Create an Animation on the new Layer</span>
<span class="n">layer_index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">section_handler</span><span class="p">.</span><span class="n">set_animation</span><span class="p">(</span><span class="n">section_index</span><span class="p">,</span> <span class="n">layer_index</span><span class="p">,</span> <span class="n">AnimationType</span><span class="o">::</span><span class="n">Solid</span><span class="p">);</span>
<span class="n">controller</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>

<span class="c1">// Set the Animation&#39;s Palette</span>
<span class="n">animation_handler</span><span class="p">.</span><span class="n">set_palette</span><span class="p">(</span><span class="n">section_index</span><span class="p">,</span> <span class="n">layer_index</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ColorPresets</span><span class="o">::</span><span class="n">Colorwheel_Palette</span><span class="p">);</span>
<span class="n">controller</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="running-cues">
<h2>Running Cues<a class="headerlink" href="#running-cues" title="Permalink to this headline">¶</a></h2>
<p>To run a Cue stored in the CueController buffer, use <code class="docutils literal notranslate"><span class="pre">CueController::run()</span></code>. You can also run a Cue using <code class="docutils literal notranslate"><span class="pre">CueController::run(unsigned</span> <span class="pre">char*</span> <span class="pre">cue)</span></code>, where <code class="docutils literal notranslate"><span class="pre">cue</span></code> is a pointer to the Cue you want to run.</p>
<p>For cases where you need to read in parts of a Cue at a time (e.g. using <code class="docutils literal notranslate"><span class="pre">Serial.read()</span></code> on an Arduino), use <code class="docutils literal notranslate"><span class="pre">CueController::read(byte)</span></code>. This reads the Cue byte-by-byte into the CueController’s buffer until the Cue is completely loaded, then runs the Cue. The CueController then resets the buffer and repeats the process for the next incoming Cue. You can feed in a continuous stream of bytes and the CueController will automatically detect when one Cue ends and the next one begins.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Setup</span>
<span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="c1">// Loop</span>
<span class="k">if</span> <span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">controller</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="blocking-cues">
<h2>Blocking Cues<a class="headerlink" href="#blocking-cues" title="Permalink to this headline">¶</a></h2>
<p>You can tell the CueController to prevent certain Cues from executing. This is useful for blocking expensive Cues (such as <code class="docutils literal notranslate"><span class="pre">Section::SetDimensions</span></code> and <code class="docutils literal notranslate"><span class="pre">Canvas::DrawFrame</span></code>) from running on low-memory devices.</p>
<p>Start by creating an array of <code class="docutils literal notranslate"><span class="pre">CueController::BlockedCues</span></code>. A <code class="docutils literal notranslate"><span class="pre">BlockedCue</span></code> consists of a <code class="docutils literal notranslate"><span class="pre">CueHandler</span></code>, and the integer representation of an action handled by that CueHandler. For example, here we block <code class="docutils literal notranslate"><span class="pre">SectionCueHandler::SetDimensions</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CueController</span><span class="o">::</span><span class="n">BlockedCue</span><span class="o">*</span> <span class="n">block</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CueController</span><span class="o">::</span><span class="n">BlockedCue</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">{</span>
  <span class="n">CueController</span><span class="o">::</span><span class="n">BlockedCue</span><span class="p">(</span><span class="n">CueController</span><span class="o">::</span><span class="n">Handler</span><span class="o">::</span><span class="n">SectionCueHandler</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="n">SectionCueHandler</span><span class="o">::</span><span class="n">Action</span><span class="o">::</span><span class="n">SetDimensions</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">controller</span><span class="p">.</span><span class="n">set_blocked_cues</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>Now, if the device receives a Cue to change its dimensions, it will ignore the Cue instead of running it.</p>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h2>
<p>Cues are byte arrays approximately 20-50 bytes long. Each Cue consists of a <em>header</em> and a <em>payload</em>. A CueHandler assembles a payload, and the CueController assembles the header.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ID and checksum are used as validation only when reading in Cues from outside.</p>
<p>Payloads vary in length depending on the command, but each payload contains most of the following parameters.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Index</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>IDByte1</p></td>
<td><p>The first character marking the start of a Cue (‘P’).</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>IDByte2</p></td>
<td><p>The second character marking the start of a Cue (‘M’).</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>IDByte3</p></td>
<td><p>The third character marking the start of a Cue (‘C’).</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>ChecksumByte</p></td>
<td><p>Calculated value for checking the integrity of a Cue.</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>SizeByte1</p></td>
<td><p>Stores the first part of the Cue’s size.</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>SizeByte2</p></td>
<td><p>Stores the second part of the Cue’s size.</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>SizeByte3</p></td>
<td><p>Stores the third part of the Cue’s size.</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>SizeByte4</p></td>
<td><p>Stores the fourth part of the Cue’s size.</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>PayloadByte/HandlerByte</p></td>
<td><p>The CueHandler that generated this Cue, and the start of the payload. This tells the CueController which CueHandler to forward the Cue to.</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>ActionByte</p></td>
<td><p>The PixelMaestro command that this Cue represents.</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>SectionByte</p></td>
<td><p>The index of the Section that this Cue modifies. Only applies to Section-level Cues.</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>LayerByte</p></td>
<td><p>The index of the Layer that this Cue modifies in relation to its base Section (e.g. a value of <em>1</em> refers to the Section’s Layer).</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>OptionsByte</p></td>
<td><p>A variable-length set of options specific to each Action. Most Options are less than 10 bytes long, but some (e.g. drawing a Canvas frame) can be several kilobytes. If the payload doesn’t fit within the CueController’s buffer, the CueController will ignore the Cue.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Shows.html" class="btn btn-neutral float-right" title="Shows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Canvases.html" class="btn btn-neutral float-left" title="Canvases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, 8bitbuddhist

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>